<!DOCTYPE html>
<html lang="it" xmlns:v-on="http://www.w3.org/1999/xhtml">
   <head>
      <meta charset="UTF-8" >
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <link href="bootstrap-4.4.1-dist/css/bootstrap.min.css" rel="stylesheet">
      <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css">
      <link rel="stylesheet" href="loginPage.css" >

      <!-- librerie bootstrap -->
      <script src="bootstrap-4.4.1-dist/js/popper.min.js" ></script>
      <script src="bootstrap-4.4.1-dist/js/jquery-slim.min.js"></script>
      <script src="bootstrap-4.4.1-dist/js/bootstrap.bundle.min.js"></script>

      <script src="vue/vue.min.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


      <title>
         Login
      </title>
   </head>
   <body class="bg">
   <div class="container-fluid mt-5 w-50" >
   <div id="loginCard" class="card">
      <article class="card-body">
         <h4 class="card-title text-center mb-4 mt-1">Login</h4>
         <hr>
         <p class="text-success text-center">Ripetizioni</p>
         <form id="app" action="javascript:app.login()">
            <p id="label" class="text-danger"></p>
            <div class="form-group">
               <div class="input-group">
                  <div class="input-group-prepend">
                     <span class="input-group-text"> <i class="fa fa-user"></i> </span>
                  </div>
                  <input name="username" v-model="username" class="form-control" placeholder="Username" type="text" autofocus="autofocus" aria-required="true" required aria-label="usernameInput">
               </div> <!-- input-group.// -->
            </div> <!-- form-group// -->
            <div class="form-group">
               <div class="input-group">
                  <div class="input-group-prepend">
                     <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                  </div>
                  <input name="password" v-model="password" class="form-control" placeholder="******" type="password" aria-required="true" required aria-label="passwordInput">
               </div> <!-- input-group.// -->
            </div> <!-- form-group// -->
            <div class="form-group">
               <button type="submit" class="btn btn-primary btn-block" aria-label="buttonAccess"> Accedi </button>
            </div> <!-- form-group// -->
            <hr>
            <a href="" > <p class="text-sm-center" data-toggle="tooltip" title="Accedi come ospite per vedere comunque le ripetizioni disponibili">
               Non hai un account?
            </p></a>
         </form>
      </article>
   </div> <!-- card.// -->

</div>

   <!-- form per redirect -->
<form method="post" id="redirect" action="Redirect" hidden>
   <input type="text" name="redirect" value="homepage"/>
</form>

<script>
   var app = new Vue({
      el: "#app",
      data: {
         link: "/progetto_ium_tweb2/Login",
         username: "",
         password: "",
         result: "",
         admin: ""
      },
      methods: {
         login : function () {
            var self = this;
            var $label = $("#label");
            $.post(this.link, {username: self.username, password: self.password}, data => {
               self.result = data.result;
               self.admin = data.admin;
               if (self.result === "failure")
                  $label.text("Nome utente o password inseriti non corretti");
               else {
                  sessionStorage.setItem("username", self.username);
                  sessionStorage.setItem("admin", self.admin);
                  $("#redirect").submit();
               }
            });
         }
      }
   })
</script>

<!--
questo funziona, anche senza import
<svg class="bi bi-chevron-right" width="32" height="32" viewBox="0 0 20 20" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6.646 3.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L12.293 10 6.646 4.354a.5.5 0 010-.708z" clip-rule="evenodd"/></svg>
questo non funziona
<svg class="docs/static/assets/img/bootstrap.svg" width="32" height="32" title="Bootstrap" />
-->


</body>
</html>